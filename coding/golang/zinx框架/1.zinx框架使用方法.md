# zinx框架使用方法

- 目录
  - [zinx基础](#zinx基础)
    - [zinx 配置](#zinx-配置)
    - [zinx 心跳检测的使用](#zinx-心跳检测的使用)

## zinx基础

### zinx 配置

- `zinx.json` 全局配置

```json
{
  "LogIsolationLevel":1 , //日志隔离级别 0：全开, 1：关debug, 2：关debug/info, 3：关debug/info/warn
//-- 默认全开
  "LogSaveDays":5,    //int 日志最大保留天数
	"LogFileSize":64*1024*1024,  //int64 日志单个日志最大容量 默认 64MB,单位：字节，记得一定要换算成MB（1024 * 1024）
  
  "RouterSlicesMode":true //开启新版路由器规则
}
```

### zinx 心跳检测的使用

- 默认参数

  ```go
  HeartBeatMsgID //(心跳报文ID)
  interval //(检测时间间隔/心跳报文发送间隔)
  HeartBeatMax //(最大心跳超时间隔) zinx.json中配置
  OnRemoteNotAlive //(对端心跳超时回调方法)
  MakeMsg //(制作心跳报文内容)
  Router //(收到心跳报文回调逻辑)
  ```

- `HeartBeatOption` 设定心跳检测参数
- `znet.RouterTime` 如果放在最前面的位置,可以打印整个路由链执行时间
- `request.RouterSlicesNext()` 执行后续路由方法
- `request.Abort()` 中止路由调用
- 示例:

  ```go  
  func main() {
    s := znet.NewServer()

    //为一个消息ID注册多个路由
    s.Use(Auth1, znet.RouterTime)
    s.AddRouterSlices(1, TestFunc)
    s.AddRouterSlices(2, TestFunc2)

    //分组路由
    group1 := s.Group(3, 5, GroupFunc1)
    {
      group1.AddHandler(3, TestFunc3)
      group1.AddHandler(4, TestFunc4)
      group1.AddHandler(5, TestFunc5)
    }
    s.Serve()
  }
  ```
